---
title: "Cookie авторизация"
date: "2019-05-09T02:19:39.000Z"
description: "Закрываем dev версию сайта от посторонних глаз В прошлой статье я рассказывал как сделать простую авторизацию по кукисам для тог"
---

<h4>Закрываем dev версию сайта от посторонних глаз</h4>
<p>В прошлой статье я рассказывал как сделать простую авторизацию по кукисам для того, чтобы закрыть хост от посторонних глаз.</p>
<h4>UPD #1</h4>
<p>Я исправил уже, но сначала я указывал код редиректа 301. Нужно отдавать 302. Если ваш клиент/заказчик/etc хотя бы раз зайдет без авторизации, то браузер может очень жестко закешировать ответ и потом его сбросить будет не легко (особенно на чужом компьютере, к которому нет доступа). Например Safari у нашего продакта так сильно закешировал ответ, что мне стоило прям усилий заставить его снова видеть сайт, даже когда я отключил авторизацию.</p>
<h4>UPD #2</h4>
<p>Если вы пользуетесь сервисом Cloudflare то, как вариант, можно сделать авторизацию по такому же типу, но через воркеры.</p>

<p>Ну вот и все. Удобно, просто, быстро.</p>
<p>Так как это реверс прокси с возможностью писать полноценные обработчики, то можно сделать сложную авторизацию, авторизацию по базе пользователей и так далее. Вы, почти что, не ограничены в реализации и можете навернуть любую логику. Конечно с приходом ngScript в Nginx можно такое же повторить и в Nginx, но тут, считайте, полноценный “Node.js” аналог. Вы можете ходить по рестапи за данными, можете логировать проходящие запросы, отдавать несуществующие страницы, сгенерированные специально для конкретного запроса (например чтобы подтвердить права на сайт через файл, при этом не залезая на сам сервер). Очень мощный инструмент.</p>


