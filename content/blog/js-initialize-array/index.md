---
title: "Инициализация массива"
date: "2018-02-21T00:10:53.000Z"
description: "С заполнением диапазоном чисел на ES6
Задачка очень старая. Были времена, когда ее спрашивали на собеседованиях.
Сейчас вряд ли "
---

<h4>С заполнением диапазоном чисел на ES6</h4>
<p>Задачка очень старая. Были времена, когда ее спрашивали на собеседованиях. Сейчас вряд ли кто-то всерьез будет спрашивать про нее на техническом интервью, но в жизни и быту она периодически встречается. А суть задачи проста: создать массив N размерности и заполнить его числами от 0 до N.</p>
<p>Раньше для этих целей использовали сложную конструкцию вида:</p>
<pre><strong>let</strong> n = 10<br><strong>const</strong> arr = <strong>Array</strong>.apply(<strong>null</strong>,{length:n}).map(<strong>Number</strong>.call, <strong>Number</strong>)</pre>
<p>Что тут происходит? Мы создаем array-like объект — это объект у которого обязательно присутствует атрибут length. Таким образом объект {length: n} — это array-like объект, но это не Array!</p>
<p>А далее “магия” которую легко распутать, достаточно понимать как устроены классы и объектв в JS и что за метод call. В итоге получаем массив с заполнением:</p>
<pre>[0,1,2,3,4,5,6,7,8,9]</pre>
<p>Отчасти эта задача и была интересна для собеседования своей “магией”. Если человек мог написать такую конструкцию и объяснить что тут просиходит — он точно знал как работает call, чем отличается от apply, что такое array-like объект, как устроен класс Array в JS и так далее. Сейчас это уже не обязательно, ведь у нас есть ES6+.</p>
<h3>ES6 синтаксис</h3>
<p>С приходом ES6 задача стала скучна, а реализация стала более читаемая и идиоматична. Теперь эта же задача может быть решена таким образом:</p>
<pre><strong>const</strong> arr = [...<strong>Array</strong>(n)].<strong>map</strong>((_,i)=&gt;i)</pre>
<p>Спред оператор можно заменить на Array.from(), например и тому подобные:</p>
<pre><strong>const</strong> arr = <strong>Array</strong>.from(<strong>Array</strong>(n)).<strong>map</strong>((_,i)=&gt;i)</pre>
<p>В итоге задача сошла на нет и ее уже редко где встретишь на собеседовании. А были времена, когда меня такое спрашивали и были времена, когда я не мог ответить на этот вопрос ?</p>
<p>Если покопаться, можно найти еще разновидности, но они будут повторять эти базовые концепции. Просто будут другие методы и способы инициализации стартового экземпляра Array.</p>
<h4>Array.keys()</h4>
<p>Вот еще интересный вариант инициализации массива:</p>
<pre><strong>const</strong> arr = [...<strong>Array</strong>(n).<strong>keys</strong>()]</pre>
<h3>UPD</h3>
<p>Небезызвестный Сергей Рубанов мне напомнил, что Array.from принимает 2й необязательный аргумент. Так что педпоследний пример можно переписать так:</p>
<pre><strong>const</strong> arr = <strong>Array</strong>.from(<strong>Array</strong>(n), (_, i) =&gt; i)</pre>
<p>или так</p>
<pre><strong>const</strong> arr = <strong>Array</strong>.from({ length: n}, (_, i) =&gt; i)</pre>


